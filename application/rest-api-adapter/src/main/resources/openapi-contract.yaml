openapi: 3.0.3
info:
  title: Example API
  version: 1.0.0

servers:
  - url: http://localhost:8080
    description: Local server
  - url: http://35.180.152.129:8080/
    description: Staging server

paths:
  /health/check:
    get:
      summary: Check health of the API
      operationId: check
      tags:
        - Health
      responses:
        "200":
          description: Application is running
          content:
            application/json:
              schema:
                type: string
                example: "OK, API is running"
  /api/v1/me:
    get:
      security:
        - bearerAuth: [ ]
      summary: Get current logged in user
      description: Get current logged in user
      operationId: getCurrentUser
      tags:
        - User
      responses:
        "200":
          description: Successfully retrieved current user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CurrentUserResponseContract'
              example:
                user:
                  id: 77dbf8f5-8490-4986-9863-969bf7dc6c23
                  email: john.doe@gmail.com
        "401":
          $ref: '#/components/responses/UnauthorizedError'
  /api/v1/board:
    post:
      security:
        - bearerAuth: [ ]
      summary: Create a retrospective board
      description: Create a retrospective board
      operationId: createBoard
      tags:
        - Board
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBoardRequestContract'
      responses:
        "201":
          description: Successfully created retrospective board
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateBoardResponseContract'
        "401":
          $ref: '#/components/responses/UnauthorizedError'

components:
  schemas:
    CreateBoardResponseContract:
      description: Retrospective board creation response contract
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
        templateId:
          type: string
          format: uuid
    CreateBoardRequestContract:
      description: Retrospective board creation request contract
      type: object
      required:
        - title
        - templateId
      properties:
        title:
          type: string
        templateId:
          type: string
          format: uuid
    CurrentUserResponseContract:
      type: object
      required:
        - user
      properties:
        user:
          $ref: '#/components/schemas/UserContract'
    UserContract:
      type: object
      required:
        - id
        - email
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
  responses:
    UnauthorizedError:
      description: Authentication is missing or invalid


